#!/Users/rajendrarusmana/dev/codebase-translator/venv/bin/python
"""
Codebase Translator CLI Entry Point
"""
import sys
import os
import subprocess
from pathlib import Path

# Get the directory where this script is located
script_dir = Path(__file__).parent.absolute()

# Run the Python module directly
if __name__ == "__main__":
    # Change to script directory and run the module
    os.chdir(script_dir)
    
    # Use venv python if available, otherwise system python
    venv_python = script_dir / "venv" / "bin" / "python"
    if venv_python.exists():
        python_exe = str(venv_python)
    else:
        python_exe = sys.executable
    
    # Pass all arguments to the Python module
    args = [python_exe, "-m", "src"] + sys.argv[1:]
    
    try:
        result = subprocess.run(args, check=True)
        sys.exit(result.returncode)
    except subprocess.CalledProcessError as e:
        sys.exit(e.returncode)
    except KeyboardInterrupt:
        print("\nTranslation interrupted by user")
        sys.exit(1)